<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ultimix: G:/projects/webdev/wwwroot/ultimix/packages/gui/packages/multiple_input/multiple_input.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>G:/projects/webdev/wwwroot/ultimix/packages/gui/packages/multiple_input/multiple_input.php</h1>  </div>
</div>
<div class="contents">
<a href="multiple__input_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003       <span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment">      *     This source code is a part of the Ultimix Project. </span>
<a name="l00005"></a>00005 <span class="comment">      *     It is distributed under BSD license. All other third side source code (like tinyMCE) is distributed under </span>
<a name="l00006"></a>00006 <span class="comment">      *     it&#39;s own license wich could be found from the corresponding files or sources. </span>
<a name="l00007"></a>00007 <span class="comment">      *     This source code is provided &quot;as is&quot; without any warranties or garanties.</span>
<a name="l00008"></a>00008 <span class="comment">      *</span>
<a name="l00009"></a>00009 <span class="comment">      *     Have a nice day!</span>
<a name="l00010"></a>00010 <span class="comment">      *</span>
<a name="l00011"></a>00011 <span class="comment">      *     @url http://ultimix.sorceforge.net</span>
<a name="l00012"></a>00012 <span class="comment">      *</span>
<a name="l00013"></a>00013 <span class="comment">      *     @author Alexey &quot;gdever&quot; Dodonov</span>
<a name="l00014"></a>00014 <span class="comment">      */</span>
<a name="l00015"></a>00015       
<a name="l00026"></a><a class="code" href="classmultiple__input__1__0__0.html">00026</a>       <span class="keyword">class </span><a class="code" href="classmultiple__input__1__0__0.html">multiple_input_1_0_0</a>{
<a name="l00027"></a>00027             
<a name="l00038"></a><a class="code" href="classmultiple__input__1__0__0.html#ae10cc045c1502f148d1aa728183898e7">00038</a>             var                           <a class="code" href="classmultiple__input__1__0__0.html#ae10cc045c1502f148d1aa728183898e7">$Database</a> = <span class="keyword">false</span>;
<a name="l00039"></a><a class="code" href="classmultiple__input__1__0__0.html#a1b21a3420462aafbfb9e6420c224452d">00039</a>             var                           <a class="code" href="classmultiple__input__1__0__0.html#a1b21a3420462aafbfb9e6420c224452d">$CachedMultyFS</a> = <span class="keyword">false</span>;
<a name="l00040"></a><a class="code" href="classmultiple__input__1__0__0.html#aaae5f70ebc2b60f22e8159944cd2d518">00040</a>             var                           <a class="code" href="classmultiple__input__1__0__0.html#aaae5f70ebc2b60f22e8159944cd2d518">$Security</a> = <span class="keyword">false</span>;
<a name="l00041"></a><a class="code" href="classmultiple__input__1__0__0.html#a2c1da60c6cd872abbb042bcd58b7c10d">00041</a>             var                           <a class="code" href="classmultiple__input__1__0__0.html#a2c1da60c6cd872abbb042bcd58b7c10d">$Settings</a> = <span class="keyword">false</span>;
<a name="l00042"></a><a class="code" href="classmultiple__input__1__0__0.html#a541f49d5b9cf7bae2f91f639abcf3458">00042</a>             var                           <a class="code" href="classmultiple__input__1__0__0.html#a541f49d5b9cf7bae2f91f639abcf3458">$String</a> = <span class="keyword">false</span>;
<a name="l00043"></a>00043             
<a name="l00054"></a><a class="code" href="classmultiple__input__1__0__0.html#a095c5d389db211932136b53f25f39685">00054</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a095c5d389db211932136b53f25f39685">__construct</a>()
<a name="l00055"></a>00055             {
<a name="l00056"></a>00056                   <span class="keywordflow">try</span>
<a name="l00057"></a>00057                   {
<a name="l00058"></a>00058                         $this-&gt;CachedMultyFS = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;cached_multy_fs&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00059"></a>00059                         $this-&gt;Database = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;database&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00060"></a>00060                         $this-&gt;Security = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;security&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00061"></a>00061                         $this-&gt;Settings = <a class="code" href="core__public__api_8php.html#a7dbfff8b452767e03ec52155dff6bdd3">get_package_object</a>( <span class="stringliteral">&#39;settings::settings&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00062"></a>00062                         $this-&gt;String = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;string&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00063"></a>00063                   }
<a name="l00064"></a>00064                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00065"></a>00065                   {
<a name="l00066"></a>00066                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00067"></a>00067                   }
<a name="l00068"></a>00068             }
<a name="l00069"></a>00069             
<a name="l00088"></a><a class="code" href="classmultiple__input__1__0__0.html#aa7a7e021f2db6a6fc6c2fd16be9330f1">00088</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#aa7a7e021f2db6a6fc6c2fd16be9330f1">pre_generation</a>( $Options )
<a name="l00089"></a>00089             {
<a name="l00090"></a>00090                   <span class="keywordflow">try</span>
<a name="l00091"></a>00091                   {
<a name="l00092"></a>00092                         $PageComposerUtilities = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;page::page_composer_utilities&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00093"></a>00093                         $PackagePath = <a class="code" href="core_8php.html#a5723fd5d1f06ff63181f91d948316d87">_get_package_relative_path_ex</a>( <span class="stringliteral">&#39;gui::multiple_input&#39;</span> , <span class="stringliteral">&#39;1.0.0&#39;</span> );
<a name="l00094"></a>00094                         $PageComposerUtilities-&gt;add_javascript( <span class="stringliteral">&quot;{http_host}/$PackagePath/include/js/multiple_input.js&quot;</span> );
<a name="l00095"></a>00095                         
<a name="l00096"></a>00096                         $Lang = <a class="code" href="core__public__api_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;lang&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00097"></a>00097                         $Lang-&gt;include_strings_js( <span class="stringliteral">&#39;gui::multiple_input&#39;</span> );
<a name="l00098"></a>00098                   }
<a name="l00099"></a>00099                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00100"></a>00100                   {
<a name="l00101"></a>00101                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00102"></a>00102                   }
<a name="l00103"></a>00103             }
<a name="l00104"></a>00104             
<a name="l00135"></a><a class="code" href="classmultiple__input__1__0__0.html#a2103999555793d624a80ee6170b447ef">00135</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a2103999555793d624a80ee6170b447ef">process_multiple_input_add</a>( $Options , $Str , $Changed )
<a name="l00136"></a>00136             {
<a name="l00137"></a>00137                   <span class="keywordflow">try</span>
<a name="l00138"></a>00138                   {
<a name="l00139"></a>00139                         $MacroParameters = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00140"></a>00140                         
<a name="l00141"></a>00141                         <span class="keywordflow">for</span>( ; ( $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( 
<a name="l00142"></a>00142                                                                         $Str , <span class="stringliteral">&#39;multiple_input_add&#39;</span> ) ) !== <span class="keyword">false</span> ; )
<a name="l00143"></a>00143                         {
<a name="l00144"></a>00144                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00145"></a>00145                               
<a name="l00146"></a>00146                               $Selector = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;selector&#39;</span> );
<a name="l00147"></a>00147                               $Template = $this-&gt;CachedMultyFS-&gt;get_template( __FILE__ , <span class="stringliteral">&#39;multiple_input_add.tpl&#39;</span> );
<a name="l00148"></a>00148                               
<a name="l00149"></a>00149                               $Template = $this-&gt;String-&gt;print_record( $Template , $this-&gt;Settings-&gt;get_raw_settings() );
<a name="l00150"></a>00150 
<a name="l00151"></a>00151                               $Str = str_replace( 
<a name="l00152"></a>00152                                     <span class="stringliteral">&quot;{multiple_input_add:$MacroParameters}&quot;</span> , $Template , $Str
<a name="l00153"></a>00153                               );
<a name="l00154"></a>00154 
<a name="l00155"></a>00155                               $Changed = <span class="keyword">true</span>;
<a name="l00156"></a>00156                         }
<a name="l00157"></a>00157                         
<a name="l00158"></a>00158                         <span class="keywordflow">return</span>( array( $Str , $Changed ) );
<a name="l00159"></a>00159                   }
<a name="l00160"></a>00160                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00161"></a>00161                   {
<a name="l00162"></a>00162                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00163"></a>00163                   }
<a name="l00164"></a>00164             }
<a name="l00165"></a>00165             
<a name="l00196"></a><a class="code" href="classmultiple__input__1__0__0.html#af53d853a5e0d49ec9baf5a06a264d9b0">00196</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#af53d853a5e0d49ec9baf5a06a264d9b0">process_multiple_input_append</a>( $Options , $Str , $Changed )
<a name="l00197"></a>00197             {
<a name="l00198"></a>00198                   <span class="keywordflow">try</span>
<a name="l00199"></a>00199                   {
<a name="l00200"></a>00200                         $MacroParameters = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00201"></a>00201                         
<a name="l00202"></a>00202                         <span class="keywordflow">for</span>( ; ( $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( 
<a name="l00203"></a>00203                                                                               $Str , <span class="stringliteral">&#39;multiple_input_append&#39;</span> ) ) !== <span class="keyword">false</span> ; )
<a name="l00204"></a>00204                         {
<a name="l00205"></a>00205                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00206"></a>00206                               
<a name="l00207"></a>00207                               $Selector = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;selector&#39;</span> );
<a name="l00208"></a>00208                               $Template = $this-&gt;CachedMultyFS-&gt;get_template( __FILE__ , <span class="stringliteral">&#39;multiple_input_append.tpl&#39;</span> );
<a name="l00209"></a>00209                               
<a name="l00210"></a>00210                               $Template = $this-&gt;String-&gt;print_record( $Template , $this-&gt;Settings-&gt;get_raw_settings() );
<a name="l00211"></a>00211 
<a name="l00212"></a>00212                               $Str = str_replace( 
<a name="l00213"></a>00213                                     <span class="stringliteral">&quot;{multiple_input_append:$MacroParameters}&quot;</span> , $Template , $Str
<a name="l00214"></a>00214                               );
<a name="l00215"></a>00215 
<a name="l00216"></a>00216                               $Changed = <span class="keyword">true</span>;
<a name="l00217"></a>00217                         }
<a name="l00218"></a>00218                         
<a name="l00219"></a>00219                         <span class="keywordflow">return</span>( array( $Str , $Changed ) );
<a name="l00220"></a>00220                   }
<a name="l00221"></a>00221                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00222"></a>00222                   {
<a name="l00223"></a>00223                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00224"></a>00224                   }
<a name="l00225"></a>00225             }
<a name="l00226"></a>00226             
<a name="l00257"></a><a class="code" href="classmultiple__input__1__0__0.html#a6b6e09c1673eedec6ddf44d363805227">00257</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a6b6e09c1673eedec6ddf44d363805227">process_multiple_line_create</a>( $Options , $Str , $Changed )
<a name="l00258"></a>00258             {
<a name="l00259"></a>00259                   <span class="keywordflow">try</span>
<a name="l00260"></a>00260                   {
<a name="l00261"></a>00261                         $MacroParameters = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00262"></a>00262                         
<a name="l00263"></a>00263                         <span class="keywordflow">for</span>( ; ( $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( 
<a name="l00264"></a>00264                                                                                     $Str , <span class="stringliteral">&#39;multiple_line_create&#39;</span> ) ) !== <span class="keyword">false</span> ; )
<a name="l00265"></a>00265                         {
<a name="l00266"></a>00266                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00267"></a>00267                               
<a name="l00268"></a>00268                               $Selector = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;selector&#39;</span> );
<a name="l00269"></a>00269                               $TemplateSelector = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;template_selector&#39;</span> );
<a name="l00270"></a>00270                               
<a name="l00271"></a>00271                               $Code = <span class="stringliteral">&quot;&lt;script&gt;&lt;/script&gt;&quot;</span>;
<a name="l00272"></a>00272 
<a name="l00273"></a>00273                               $Str = str_replace( 
<a name="l00274"></a>00274                                     <span class="stringliteral">&quot;{multiple_line_create:$MacroParameters}&quot;</span> , $Template , $Str
<a name="l00275"></a>00275                               );
<a name="l00276"></a>00276 
<a name="l00277"></a>00277                               $Changed = <span class="keyword">true</span>;
<a name="l00278"></a>00278                         }
<a name="l00279"></a>00279                         
<a name="l00280"></a>00280                         <span class="keywordflow">return</span>( array( $Str , $Changed ) );
<a name="l00281"></a>00281                   }
<a name="l00282"></a>00282                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00283"></a>00283                   {
<a name="l00284"></a>00284                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00285"></a>00285                   }
<a name="l00286"></a>00286             }
<a name="l00287"></a>00287             
<a name="l00318"></a><a class="code" href="classmultiple__input__1__0__0.html#a19e4020eef3ee72db80f07869a5d299e">00318</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a19e4020eef3ee72db80f07869a5d299e">process_string</a>( $Options , $Str , &amp;$Changed )
<a name="l00319"></a>00319             {
<a name="l00320"></a>00320                   <span class="keywordflow">try</span>
<a name="l00321"></a>00321                   {
<a name="l00322"></a>00322                         list( $Str , $Changed ) = $this-&gt;<a class="code" href="classmultiple__input__1__0__0.html#a2103999555793d624a80ee6170b447ef">process_multiple_input_add</a>( $Options , $Str , $Changed );
<a name="l00323"></a>00323                         
<a name="l00324"></a>00324                         list( $Str , $Changed ) = $this-&gt;<a class="code" href="classmultiple__input__1__0__0.html#af53d853a5e0d49ec9baf5a06a264d9b0">process_multiple_input_append</a>( $Options , $Str , $Changed );
<a name="l00325"></a>00325                         
<a name="l00326"></a>00326                         list( $Str , $Changed ) = $this-&gt;<a class="code" href="classmultiple__input__1__0__0.html#a6b6e09c1673eedec6ddf44d363805227">process_multiple_line_create</a>( $Options , $Str , $Changed );
<a name="l00327"></a>00327                         
<a name="l00328"></a>00328                         <span class="keywordflow">return</span>( $Str );
<a name="l00329"></a>00329                   }
<a name="l00330"></a>00330                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00331"></a>00331                   {
<a name="l00332"></a>00332                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00333"></a>00333                   }
<a name="l00334"></a>00334             }
<a name="l00335"></a>00335             
<a name="l00358"></a><a class="code" href="classmultiple__input__1__0__0.html#ae524f394be2c9c6467f9429ddfe62acc">00358</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#ae524f394be2c9c6467f9429ddfe62acc">common_replacements</a>( $Str )
<a name="l00359"></a>00359             {
<a name="l00360"></a>00360                   <span class="keywordflow">try</span>
<a name="l00361"></a>00361                   {
<a name="l00362"></a>00362                         $Str = str_replace( <span class="stringliteral">&#39;{id}&#39;</span> , $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;id&#39;</span> , md5( microtime( <span class="keyword">true</span> ) ) ) , $Str );
<a name="l00363"></a>00363                         $Str = str_replace( 
<a name="l00364"></a>00364                               <span class="stringliteral">&#39;{value}&#39;</span> , 
<a name="l00365"></a>00365                               $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;value&#39;</span> , <span class="stringliteral">&#39;{http_param:post=1;name={name};default=}&#39;</span> ) , 
<a name="l00366"></a>00366                               $Str
<a name="l00367"></a>00367                         );
<a name="l00368"></a>00368                         $Str = str_replace( 
<a name="l00369"></a>00369                               <span class="stringliteral">&#39;{visible_value}&#39;</span> , 
<a name="l00370"></a>00370                               $this-&gt;Settings-&gt;get_setting( 
<a name="l00371"></a>00371                                     <span class="stringliteral">&#39;visible_value&#39;</span> , <span class="stringliteral">&#39;{http_param:post=1;name=visible_{name};default=}&#39;</span> 
<a name="l00372"></a>00372                               ) , 
<a name="l00373"></a>00373                               $Str
<a name="l00374"></a>00374                         );
<a name="l00375"></a>00375                         $Str = str_replace( <span class="stringliteral">&#39;{name}&#39;</span> , $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;name&#39;</span> , $EntityName ) , $Str );
<a name="l00376"></a>00376                         $Str = str_replace( 
<a name="l00377"></a>00377                               <span class="stringliteral">&#39;{visible_name}&#39;</span> , $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;visible_name&#39;</span> , <span class="stringliteral">&quot;visible_$Name&quot;</span> ) , $Str
<a name="l00378"></a>00378                         );
<a name="l00379"></a>00379                         $Str = str_replace( <span class="stringliteral">&#39;{class}&#39;</span> , $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;class&#39;</span> , <span class="stringliteral">&#39;width_320 flat&#39;</span> ) , $Str );
<a name="l00380"></a>00380                         
<a name="l00381"></a>00381                         <span class="keywordflow">return</span>( $Str );
<a name="l00382"></a>00382                   }
<a name="l00383"></a>00383                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00384"></a>00384                   {
<a name="l00385"></a>00385                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00386"></a>00386                   }
<a name="l00387"></a>00387             }
<a name="l00388"></a>00388             
<a name="l00423"></a><a class="code" href="classmultiple__input__1__0__0.html#a8d209d8638c2d4e623d860f9ad3f8b63">00423</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a8d209d8638c2d4e623d860f9ad3f8b63">input</a>( $FilePath , $EntityName , $Str , &amp;$Changed )
<a name="l00424"></a>00424             {
<a name="l00425"></a>00425                   <span class="keywordflow">try</span>
<a name="l00426"></a>00426                   {
<a name="l00427"></a>00427                         <span class="keywordflow">for</span>( ; $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( $Str , $EntityName.<span class="stringliteral">&#39;_input&#39;</span> ) ; )
<a name="l00428"></a>00428                         {
<a name="l00429"></a>00429                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00430"></a>00430                               
<a name="l00431"></a>00431                               $Template = $this-&gt;CachedMultyFS-&gt;get_template( $FilePath , $EntityName.<span class="stringliteral">&#39;_input.tpl&#39;</span> );
<a name="l00432"></a>00432                               
<a name="l00433"></a>00433                               $Template = $this-&gt;<a class="code" href="classmultiple__input__1__0__0.html#ae524f394be2c9c6467f9429ddfe62acc">common_replacements</a>( $Template );
<a name="l00434"></a>00434 
<a name="l00435"></a>00435                               $Str = str_replace( 
<a name="l00436"></a>00436                                     <span class="charliteral">&#39;{&#39;</span>.$EntityName.<span class="stringliteral">&quot;_input:$MacroParameters}&quot;</span> , $Template , $Str
<a name="l00437"></a>00437                               );
<a name="l00438"></a>00438                               
<a name="l00439"></a>00439                               $Changed = <span class="keyword">true</span>;
<a name="l00440"></a>00440                         }
<a name="l00441"></a>00441                         
<a name="l00442"></a>00442                         <span class="keywordflow">return</span>( $Str );
<a name="l00443"></a>00443                   }
<a name="l00444"></a>00444                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00445"></a>00445                   {
<a name="l00446"></a>00446                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00447"></a>00447                   }
<a name="l00448"></a>00448             }
<a name="l00449"></a>00449             
<a name="l00484"></a><a class="code" href="classmultiple__input__1__0__0.html#a12c9dd0322bfa87b7f2272fb7108a98c">00484</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#a12c9dd0322bfa87b7f2272fb7108a98c">input_field</a>( $FilePath , $EntityName , $Str , &amp;$Changed )
<a name="l00485"></a>00485             {
<a name="l00486"></a>00486                   <span class="keywordflow">try</span>
<a name="l00487"></a>00487                   {
<a name="l00488"></a>00488                         $Limitations = array( <span class="stringliteral">&#39;value&#39;</span> =&gt; TERMINAL_VALUE , <span class="stringliteral">&#39;visible_value&#39;</span> =&gt; TERMINAL_VALUE );
<a name="l00489"></a>00489                         <span class="keywordflow">for</span>( ; $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( 
<a name="l00490"></a>00490                                                                         $Str , $EntityName.<span class="stringliteral">&#39;_input_field&#39;</span> , $Limitations ) ; )
<a name="l00491"></a>00491                         {
<a name="l00492"></a>00492                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00493"></a>00493 
<a name="l00494"></a>00494                               $Template = $this-&gt;CachedMultyFS-&gt;get_template( $FilePath , $EntityName.<span class="stringliteral">&#39;_input_field.tpl&#39;</span> );
<a name="l00495"></a>00495 
<a name="l00496"></a>00496                               <span class="keywordflow">if</span>( $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;set_dialog&#39;</span> , <span class="keyword">false</span> ) &amp;&amp; 
<a name="l00497"></a>00497                                     $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;set_dialog&#39;</span> ) != false )
<a name="l00498"></a>00498                               {
<a name="l00499"></a>00499                                     $Template = str_replace( 
<a name="l00500"></a>00500                                           <span class="stringliteral">&#39;{set_dialog}&#39;</span> , 
<a name="l00501"></a>00501                                           <span class="stringliteral">&#39; onclick=&quot;ultimix.OpenDialog( \&#39;#&#39;</span>.$this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;dialog_id&#39;</span> ).
<a name="l00502"></a>00502                                                 <span class="charliteral">&#39;\&#39;</span> , \<span class="stringliteral">&#39;#{id}\&#39; , \&#39;#visible_{id}\&#39; , \&#39;#&#39;</span>.$this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;dialog_id&#39;</span> ).
<a name="l00503"></a>00503                                                 <span class="stringliteral">&#39;_data\&#39; );&quot;&#39;</span> , 
<a name="l00504"></a>00504                                           $Template
<a name="l00505"></a>00505                                     );
<a name="l00506"></a>00506                               }
<a name="l00507"></a>00507                               <span class="keywordflow">else</span>
<a name="l00508"></a>00508                               {
<a name="l00509"></a>00509                                     <span class="keywordflow">if</span>( $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;dialog_id&#39;</span> , <span class="keyword">false</span> ) )
<a name="l00510"></a>00510                                     {
<a name="l00511"></a>00511                                           $Template .= <span class="stringliteral">&#39;{add_opener:selector=#&#39;</span>.$this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;dialog_id&#39;</span> ).
<a name="l00512"></a>00512                                                 <span class="stringliteral">&#39;;opener=#visible_{id}}&#39;</span>;
<a name="l00513"></a>00513                                     }
<a name="l00514"></a>00514                               }
<a name="l00515"></a>00515 
<a name="l00516"></a>00516                               $Template = $this-&gt;<a class="code" href="classmultiple__input__1__0__0.html#ae524f394be2c9c6467f9429ddfe62acc">common_replacements</a>( $Template );
<a name="l00517"></a>00517 
<a name="l00518"></a>00518                               $Str = str_replace( <span class="charliteral">&#39;{&#39;</span>.$EntityName.<span class="stringliteral">&quot;_input_field:$MacroParameters}&quot;</span> , $Template , $Str );
<a name="l00519"></a>00519 
<a name="l00520"></a>00520                               $Changed = <span class="keyword">true</span>;
<a name="l00521"></a>00521                         }
<a name="l00522"></a>00522                         
<a name="l00523"></a>00523                         <span class="keywordflow">return</span>( $Str );
<a name="l00524"></a>00524                   }
<a name="l00525"></a>00525                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00526"></a>00526                   {
<a name="l00527"></a>00527                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00528"></a>00528                   }
<a name="l00529"></a>00529             }
<a name="l00530"></a>00530             
<a name="l00565"></a><a class="code" href="classmultiple__input__1__0__0.html#acebf8baea8bbb9046022ff80e38ff49f">00565</a>             function                <a class="code" href="classmultiple__input__1__0__0.html#acebf8baea8bbb9046022ff80e38ff49f">multiple_input</a>( $FilePath , $EntityName , $Str , &amp;$Changed )
<a name="l00566"></a>00566             {
<a name="l00567"></a>00567                   <span class="keywordflow">try</span>
<a name="l00568"></a>00568                   {
<a name="l00569"></a>00569                         <span class="keywordflow">for</span>( ; $MacroParameters = $this-&gt;String-&gt;get_macro_parameters( 
<a name="l00570"></a>00570                                                                                           $Str , <span class="stringliteral">&#39;multiple_&#39;</span>.$EntityName.<span class="stringliteral">&#39;_input&#39;</span> ) ; )
<a name="l00571"></a>00571                         {
<a name="l00572"></a>00572                               $this-&gt;Settings-&gt;load_settings( $MacroParameters );
<a name="l00573"></a>00573                               
<a name="l00574"></a>00574                               $Template = $this-&gt;CachedMultyFS-&gt;get_template( $FilePath , $EntityName.<span class="stringliteral">&#39;_input.tpl&#39;</span> );
<a name="l00575"></a>00575                               
<a name="l00576"></a>00576                               $id = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;id&#39;</span> , md5( microtime( <span class="keyword">true</span> ) ) );
<a name="l00577"></a>00577                               $Template = str_replace( <span class="stringliteral">&#39;{id}&#39;</span> , $id , $Template );
<a name="l00578"></a>00578                               
<a name="l00579"></a>00579                               $Name = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;name&#39;</span> , $EntityName );
<a name="l00580"></a>00580                               $Values = $this-&gt;Settings-&gt;get_setting( <span class="stringliteral">&#39;value&#39;</span> , <span class="keyword">false</span> );
<a name="l00581"></a>00581                               $Template = str_replace( <span class="stringliteral">&#39;{name}&#39;</span> , $Name.<span class="stringliteral">&#39;[]&#39;</span> , $Template );
<a name="l00582"></a>00582                               
<a name="l00583"></a>00583                               <span class="keywordflow">if</span>( $Values !== <span class="keyword">false</span> )
<a name="l00584"></a>00584                               {
<a name="l00585"></a>00585                                     $Values = unserialize( $this-&gt;Security-&gt;get( $Values , <span class="stringliteral">&#39;unsafe_string&#39;</span> ) );
<a name="l00586"></a>00586                                     
<a name="l00587"></a>00587                                     $VisibleValues = <a class="code" href="functional__programming_8php.html#a9c56c5cb857578644fdd5deaba4cd63f">get_field_ex</a>( $Values , <span class="stringliteral">&#39;visible_value&#39;</span> );
<a name="l00588"></a>00588                                     $Values        = <a class="code" href="functional__programming_8php.html#a9c56c5cb857578644fdd5deaba4cd63f">get_field_ex</a>( $Values , <span class="stringliteral">&#39;id&#39;</span> );
<a name="l00589"></a>00589                               }
<a name="l00590"></a>00590                               elseif( $this-&gt;Security-&gt;get_gp( $Name , <span class="stringliteral">&#39;set&#39;</span> ) )
<a name="l00591"></a>00591                               {
<a name="l00592"></a>00592                                     $Values = $this-&gt;Security-&gt;filter_http_data( <span class="stringliteral">&quot;keys=$Name;filled&quot;</span> );
<a name="l00593"></a>00593                                     $Values = $Values[ $Name ];
<a name="l00594"></a>00594                                     
<a name="l00595"></a>00595                                     $VisibleValues = $this-&gt;Security-&gt;filter_http_data( <span class="stringliteral">&quot;keys=visible_$Name;filled&quot;</span> );
<a name="l00596"></a>00596                                     $VisibleValues = $VisibleValues[ <span class="stringliteral">&quot;visible_$Name&quot;</span> ];
<a name="l00597"></a>00597                               }
<a name="l00598"></a>00598                               
<a name="l00599"></a>00599                               <span class="keywordflow">if</span>( $Values !== <span class="keyword">false</span> )
<a name="l00600"></a>00600                               {                                   
<a name="l00601"></a>00601                                     <span class="keywordflow">foreach</span>( $Values as $k =&gt; $v )
<a name="l00602"></a>00602                                     {
<a name="l00603"></a>00603                                           $Template.=<span class="stringliteral">&quot;{multiple_input_append:selector=#$id;values=[lfb] &#39;value&#39; : &#39;$v&#39;&quot;</span>.
<a name="l00604"></a>00604                                                 <span class="stringliteral">&quot; , &#39;visible_value&#39; : &#39;&quot;</span>.$VisibleValues[ $k ].<span class="stringliteral">&quot;&#39; [rfb]}&quot;</span>;
<a name="l00605"></a>00605                                     }
<a name="l00606"></a>00606                               }
<a name="l00607"></a>00607                               <span class="keywordflow">else</span>
<a name="l00608"></a>00608                               {
<a name="l00609"></a>00609                                     $Template.=<span class="stringliteral">&quot;{multiple_input_add:selector=#$id;values=[lfb] &quot;</span>.
<a name="l00610"></a>00610                                           <span class="stringliteral">&quot;&#39;value&#39; : &#39;&#39; , &#39;visible_value&#39; : &#39;&#39; [rfb]}&quot;</span>;
<a name="l00611"></a>00611                               }
<a name="l00612"></a>00612                               
<a name="l00613"></a>00613                               $Str = str_replace( <span class="stringliteral">&#39;{multiple_&#39;</span>.$EntityName.<span class="stringliteral">&quot;_input:$MacroParameters}&quot;</span> , $Template , $Str );
<a name="l00614"></a>00614                               
<a name="l00615"></a>00615                               $Changed = <span class="keyword">true</span>;
<a name="l00616"></a>00616                         }
<a name="l00617"></a>00617                         
<a name="l00618"></a>00618                         <span class="keywordflow">return</span>( $Str );
<a name="l00619"></a>00619                   }
<a name="l00620"></a>00620                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00621"></a>00621                   {
<a name="l00622"></a>00622                         $a = func_get_args();<a class="code" href="core__utilities_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00623"></a>00623                   }
<a name="l00624"></a>00624             }
<a name="l00625"></a>00625       }
<a name="l00626"></a>00626       
<a name="l00627"></a>00627 ?&gt;
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Oct 3 2011 14:49:50 for ultimix by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
