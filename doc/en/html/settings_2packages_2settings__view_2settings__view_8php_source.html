<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ultimix: packages/settings/packages/settings_view/settings_view.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>packages/settings/packages/settings_view/settings_view.php</h1>  </div>
</div>
<div class="contents">
<a href="settings_2packages_2settings__view_2settings__view_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00003"></a>00003       <span class="comment">/*</span>
<a name="l00004"></a>00004 <span class="comment">      *     This source code is a part of the Ultimix Project. </span>
<a name="l00005"></a>00005 <span class="comment">      *     It is distributed under BSD license. All other third side source code (like tinyMCE) is distributed under </span>
<a name="l00006"></a>00006 <span class="comment">      *     it&#39;s own license wich could be found from the corresponding files or sources. </span>
<a name="l00007"></a>00007 <span class="comment">      *     This source code is provided &quot;as is&quot; without any warranties or garanties.</span>
<a name="l00008"></a>00008 <span class="comment">      *</span>
<a name="l00009"></a>00009 <span class="comment">      *     Have a nice day!</span>
<a name="l00010"></a>00010 <span class="comment">      *</span>
<a name="l00011"></a>00011 <span class="comment">      *     @url http://ultimix.sorceforge.net</span>
<a name="l00012"></a>00012 <span class="comment">      *</span>
<a name="l00013"></a>00013 <span class="comment">      *     @author Alexey &quot;gdever&quot; Dodonov</span>
<a name="l00014"></a>00014 <span class="comment">      */</span>
<a name="l00015"></a>00015       
<a name="l00026"></a>00026       <span class="keyword">class </span><a class="code" href="classsettings__view__1__0__0.html">settings_view_1_0_0</a>{
<a name="l00027"></a>00027             
<a name="l00038"></a><a class="code" href="classsettings__view__1__0__0.html#a42734c34e5429a8ec8d5dc3ff7331492">00038</a>             var                           <a class="code" href="classsettings__view__1__0__0.html#a42734c34e5429a8ec8d5dc3ff7331492">$BlockSettings</a> = <span class="keyword">false</span>;
<a name="l00039"></a><a class="code" href="classsettings__view__1__0__0.html#a1b21a3420462aafbfb9e6420c224452d">00039</a>             var                           <a class="code" href="classsettings__view__1__0__0.html#a1b21a3420462aafbfb9e6420c224452d">$CachedMultyFS</a> = <span class="keyword">false</span>;
<a name="l00040"></a><a class="code" href="classsettings__view__1__0__0.html#a0467df684c0247d4015d1f61203b7463">00040</a>             var                           <a class="code" href="classsettings__view__1__0__0.html#a0467df684c0247d4015d1f61203b7463">$DBSettings</a> = <span class="keyword">false</span>;
<a name="l00041"></a><a class="code" href="classsettings__view__1__0__0.html#a541f49d5b9cf7bae2f91f639abcf3458">00041</a>             var                           <a class="code" href="classsettings__view__1__0__0.html#a541f49d5b9cf7bae2f91f639abcf3458">$String</a> = <span class="keyword">false</span>;
<a name="l00042"></a>00042       
<a name="l00053"></a><a class="code" href="classsettings__view__1__0__0.html#a8a55ddd2b83051d9d86510dcd04f9f4c">00053</a>             var                           <a class="code" href="classsettings__view__1__0__0.html#a8a55ddd2b83051d9d86510dcd04f9f4c">$Output</a> = <span class="keyword">false</span>;
<a name="l00054"></a>00054       
<a name="l00065"></a><a class="code" href="classsettings__view__1__0__0.html#a095c5d389db211932136b53f25f39685">00065</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a095c5d389db211932136b53f25f39685">__construct</a>()
<a name="l00066"></a>00066             {
<a name="l00067"></a>00067                   <span class="keywordflow">try</span>
<a name="l00068"></a>00068                   {
<a name="l00069"></a>00069                         $this-&gt;BlockSettings = <a class="code" href="core_8php.html#a7dbfff8b452767e03ec52155dff6bdd3">get_package_object</a>( <span class="stringliteral">&#39;settings::settings&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00070"></a>00070                         $this-&gt;CachedMultyFS = <a class="code" href="core_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;cached_multy_fs&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00071"></a>00071                         $this-&gt;DBSettings = <a class="code" href="core_8php.html#a7dbfff8b452767e03ec52155dff6bdd3">get_package_object</a>( <span class="stringliteral">&#39;settings::db_settings&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00072"></a>00072                         $this-&gt;String = <a class="code" href="core_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;string&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00073"></a>00073                   }
<a name="l00074"></a>00074                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00075"></a>00075                   {
<a name="l00076"></a>00076                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00077"></a>00077                   }
<a name="l00078"></a>00078             }
<a name="l00079"></a>00079             
<a name="l00102"></a><a class="code" href="classsettings__view__1__0__0.html#a8e7117134b20662593e8a79d8f0aa0b4">00102</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a8e7117134b20662593e8a79d8f0aa0b4">get_db_setting</a>( &amp;$Manifest )
<a name="l00103"></a>00103             {
<a name="l00104"></a>00104                   <span class="keywordflow">try</span>
<a name="l00105"></a>00105                   {
<a name="l00106"></a>00106                         $SettingName = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;setting_name&#39;</span> );
<a name="l00107"></a>00107                         $DefaultValue = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;default_value&#39;</span> , <span class="stringliteral">&#39;&#39;</span> );
<a name="l00108"></a>00108                               
<a name="l00109"></a>00109                         $SettingValue = $this-&gt;DBSettings-&gt;get_setting( $SettingName , $DefaultValue );
<a name="l00110"></a>00110                         
<a name="l00111"></a>00111                         <span class="keywordflow">return</span>( array( $SettingName , $SettingValue ) );
<a name="l00112"></a>00112                   }
<a name="l00113"></a>00113                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00114"></a>00114                   {
<a name="l00115"></a>00115                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00116"></a>00116                   }
<a name="l00117"></a>00117             }
<a name="l00118"></a>00118             
<a name="l00141"></a><a class="code" href="classsettings__view__1__0__0.html#a555af9adf0b953c25f556085429caaef">00141</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a555af9adf0b953c25f556085429caaef">get_package_setting</a>( &amp;$Manifest )
<a name="l00142"></a>00142             {
<a name="l00143"></a>00143                   <span class="keywordflow">try</span>
<a name="l00144"></a>00144                   {
<a name="l00145"></a>00145                         $PackageName = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;package_name&#39;</span> , <span class="keyword">false</span> );
<a name="l00146"></a>00146                         $PackageVersion = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;package_version&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> );
<a name="l00147"></a>00147                         $ConfigFileName = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;config_file_name&#39;</span> );
<a name="l00148"></a>00148                         $SettingName = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;setting_name&#39;</span> );
<a name="l00149"></a>00149                         $DefaultValue = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;default_value&#39;</span> , <span class="stringliteral">&#39;&#39;</span> );
<a name="l00150"></a>00150                         
<a name="l00151"></a>00151                         $SettingValue = $Manifest-&gt;get_package_setting( 
<a name="l00152"></a>00152                               $PackageName , $PackageVersion , $ConfigFileName , $SettingName , $DefaultValue 
<a name="l00153"></a>00153                         );
<a name="l00154"></a>00154                         
<a name="l00155"></a>00155                         <span class="keywordflow">return</span>( array( $SettingName , $SettingValue ) );
<a name="l00156"></a>00156                   }
<a name="l00157"></a>00157                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00158"></a>00158                   {
<a name="l00159"></a>00159                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00160"></a>00160                   }
<a name="l00161"></a>00161             }
<a name="l00162"></a>00162             
<a name="l00185"></a><a class="code" href="classsettings__view__1__0__0.html#a835f089b1160820428377aae54f29987">00185</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a835f089b1160820428377aae54f29987">get_setting</a>( &amp;$Manifest )
<a name="l00186"></a>00186             {
<a name="l00187"></a>00187                   <span class="keywordflow">try</span>
<a name="l00188"></a>00188                   {
<a name="l00189"></a>00189                         $PackageName = $Manifest-&gt;get_setting( <span class="stringliteral">&#39;package_name&#39;</span> , <span class="keyword">false</span> );
<a name="l00190"></a>00190                         <span class="keywordflow">if</span>( $PackageName === <span class="keyword">false</span> )
<a name="l00191"></a>00191                         {
<a name="l00192"></a>00192                               <span class="keywordflow">return</span>( $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#a8e7117134b20662593e8a79d8f0aa0b4">get_db_setting</a>( $Manifest ) );
<a name="l00193"></a>00193                         }
<a name="l00194"></a>00194                         <span class="keywordflow">else</span>
<a name="l00195"></a>00195                         {
<a name="l00196"></a>00196                               <span class="keywordflow">return</span>( $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#a555af9adf0b953c25f556085429caaef">get_package_setting</a>( $Manifest ) );
<a name="l00197"></a>00197                         }
<a name="l00198"></a>00198                   }
<a name="l00199"></a>00199                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00200"></a>00200                   {
<a name="l00201"></a>00201                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00202"></a>00202                   }
<a name="l00203"></a>00203             }
<a name="l00204"></a>00204             
<a name="l00227"></a><a class="code" href="classsettings__view__1__0__0.html#aef55200b202cd3466957c36ee3660049">00227</a>             function                <a class="code" href="classsettings__view__1__0__0.html#aef55200b202cd3466957c36ee3660049">process_config_line</a>( $ConfigLine )
<a name="l00228"></a>00228             {
<a name="l00229"></a>00229                   <span class="keywordflow">try</span>
<a name="l00230"></a>00230                   {
<a name="l00231"></a>00231                         $Manifest = <a class="code" href="core_8php.html#a7dbfff8b452767e03ec52155dff6bdd3">get_package_object</a>( <span class="stringliteral">&#39;settings::settings&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00232"></a>00232                         $Manifest-&gt;load_settings( $ConfigLine );
<a name="l00233"></a>00233                         
<a name="l00234"></a>00234                         list( $SettingName , $SettingValue ) = $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#a835f089b1160820428377aae54f29987">get_setting</a>( $Manifest );
<a name="l00235"></a>00235                         
<a name="l00236"></a>00236                         <span class="keywordflow">switch</span>( $Manifest-&gt;get_setting( <span class="stringliteral">&#39;type&#39;</span> , <span class="stringliteral">&#39;input&#39;</span> ) )
<a name="l00237"></a>00237                         {
<a name="l00238"></a>00238                               <span class="keywordflow">case</span>( <span class="stringliteral">&#39;input&#39;</span> ):
<a name="l00239"></a>00239                                     <span class="keywordflow">return</span>( <span class="stringliteral">&#39;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;{lang:&#39;</span>.$Manifest-&gt;get_setting( <span class="stringliteral">&#39;label&#39;</span> , <span class="stringliteral">&#39;setting&#39;</span> ).
<a name="l00240"></a>00240                                     <span class="stringliteral">&quot;}&lt;/td&gt;&lt;td align=\&quot;left\&quot;&gt;&lt;input class=\&quot;flat width_320\&quot; name=\&quot;$SettingName\&quot; &quot;</span>.
<a name="l00241"></a>00241                                     <span class="stringliteral">&quot;value=\&quot;$SettingValue\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span> );
<a name="l00242"></a>00242                               <span class="keywordflow">break</span>;
<a name="l00243"></a>00243                               <span class="keywordflow">default</span>:
<a name="l00244"></a>00244                                     $PageComposer = <a class="code" href="core_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;page::page_composer&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00245"></a>00245                                     $PageComposer-&gt;add_error_message( <span class="stringliteral">&#39;form_manifest_was_not_found&#39;</span> );
<a name="l00246"></a>00246                                     <span class="keywordflow">return</span>( <span class="stringliteral">&#39;&#39;</span> );
<a name="l00247"></a>00247                               <span class="keywordflow">break</span>;
<a name="l00248"></a>00248                         }
<a name="l00249"></a>00249                   }
<a name="l00250"></a>00250                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00251"></a>00251                   {
<a name="l00252"></a>00252                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00253"></a>00253                   }
<a name="l00254"></a>00254             }
<a name="l00255"></a>00255             
<a name="l00274"></a><a class="code" href="classsettings__view__1__0__0.html#a11926435518362bbd956ef0941bee08a">00274</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a11926435518362bbd956ef0941bee08a">settings_form</a>( $Options )
<a name="l00275"></a>00275             {
<a name="l00276"></a>00276                   <span class="keywordflow">try</span>
<a name="l00277"></a>00277                   {
<a name="l00278"></a>00278                         $FormName = $Options-&gt;get_setting( <span class="stringliteral">&#39;form_name&#39;</span> );
<a name="l00279"></a>00279 
<a name="l00280"></a>00280                         $ConfigPath = dirname( __FILE__ ).<span class="stringliteral">&quot;/conf/cf_$FormName&quot;</span>;
<a name="l00281"></a>00281                         <span class="keywordflow">if</span>( $this-&gt;CachedMultyFS-&gt;file_exists( $ConfigPath ) )
<a name="l00282"></a>00282                         {
<a name="l00283"></a>00283                               $Config = $this-&gt;CachedMultyFS-&gt;file_get_contents( $ConfigPath , <span class="stringliteral">&#39;exploded&#39;</span> );
<a name="l00284"></a>00284                               
<a name="l00285"></a>00285                               $this-&gt;Output  = <span class="stringliteral">&#39;&lt;table class=&quot;settings_form&quot; style=&quot;width: 400px; margin: 30px auto;&quot;&gt;&#39;</span>.
<a name="l00286"></a>00286                                                        <span class="stringliteral">&#39;&lt;input type=&quot;hidden&quot; name=&quot;settings_form_action&quot; value=&quot;1&quot;&gt;&#39;</span>;
<a name="l00287"></a>00287                               <span class="keywordflow">foreach</span>( $Config as $i =&gt; $ConfigLine )
<a name="l00288"></a>00288                               {
<a name="l00289"></a>00289                                     $this-&gt;Output .= $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#aef55200b202cd3466957c36ee3660049">process_config_line</a>( $ConfigLine );
<a name="l00290"></a>00290                               }
<a name="l00291"></a>00291                               $this-&gt;Output .= <span class="stringliteral">&quot;&lt;tr&gt;&lt;td align=\&quot;center\&quot; colspan=\&quot;2\&quot;&gt;{href:tpl=std;&quot;</span>.
<a name="l00292"></a>00292                                                        <span class="stringliteral">&quot;page=javascript:ultimix.data_form.SubmitDataForm( &#39;.settings_form&#39; );&quot;</span>.
<a name="l00293"></a>00293                                                        <span class="stringliteral">&quot;text=save}&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>;
<a name="l00294"></a>00294                         }
<a name="l00295"></a>00295                         <span class="keywordflow">else</span>
<a name="l00296"></a>00296                         {
<a name="l00297"></a>00297                               $this-&gt;Output = <span class="stringliteral">&#39;{lang:tab_manifest_was_not_found}&#39;</span>;
<a name="l00298"></a>00298                         }
<a name="l00299"></a>00299                   }
<a name="l00300"></a>00300                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00301"></a>00301                   {
<a name="l00302"></a>00302                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00303"></a>00303                   }
<a name="l00304"></a>00304             }
<a name="l00305"></a>00305             
<a name="l00328"></a><a class="code" href="classsettings__view__1__0__0.html#a43074158f41bf195878c903457afa35f">00328</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a43074158f41bf195878c903457afa35f">view</a>( $Options )
<a name="l00329"></a>00329             {
<a name="l00330"></a>00330                   <span class="keywordflow">try</span>
<a name="l00331"></a>00331                   {
<a name="l00332"></a>00332                         $Context = <a class="code" href="core_8php.html#a3ba50cf690fa88e981b38b4779f18759">get_package</a>( <span class="stringliteral">&#39;gui::context&#39;</span> , <span class="stringliteral">&#39;last&#39;</span> , __FILE__ );
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                         $Context-&gt;load_config( dirname( __FILE__ ).<span class="stringliteral">&#39;/conf/cfcx_settings_form&#39;</span> );
<a name="l00335"></a>00335                         <span class="keywordflow">if</span>( $Context-&gt;execute( $Options , $this ) )<span class="keywordflow">return</span>( $this-&gt;Output );
<a name="l00336"></a>00336                         
<a name="l00337"></a>00337                         <span class="keywordflow">return</span>( <span class="stringliteral">&#39;&#39;</span> );
<a name="l00338"></a>00338                   }
<a name="l00339"></a>00339                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00340"></a>00340                   {
<a name="l00341"></a>00341                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00342"></a>00342                   }
<a name="l00343"></a>00343             }
<a name="l00344"></a>00344             
<a name="l00371"></a><a class="code" href="classsettings__view__1__0__0.html#a5937a3e93daa966291bc27f16f665bbf">00371</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a5937a3e93daa966291bc27f16f665bbf">process_settings</a>( $ProcessingString , $Changed )
<a name="l00372"></a>00372             {
<a name="l00373"></a>00373                   <span class="keywordflow">try</span>
<a name="l00374"></a>00374                   {
<a name="l00375"></a>00375                         $BlockParameters = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00376"></a>00376                         <span class="keywordflow">for</span>( ; $BlockParameters = $this-&gt;String-&gt;get_macro_parameters( $ProcessingString , <span class="stringliteral">&#39;settings&#39;</span> ) ; )
<a name="l00377"></a>00377                         {
<a name="l00378"></a>00378                               $this-&gt;BlockSettings-&gt;load_settings( $BlockParameters );
<a name="l00379"></a>00379                               $ProcessingString = str_replace( 
<a name="l00380"></a>00380                                     <span class="stringliteral">&quot;{settings:$BlockParameters}&quot;</span> , 
<a name="l00381"></a>00381                                     $this-&gt;BlockSettings-&gt;get_package_setting( 
<a name="l00382"></a>00382                                           $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;package_name&#39;</span> ) , 
<a name="l00383"></a>00383                                           $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;package_version&#39;</span> ) , 
<a name="l00384"></a>00384                                           $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;config_file_name&#39;</span> ) , 
<a name="l00385"></a>00385                                           $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;name&#39;</span> ) , 
<a name="l00386"></a>00386                                           $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;default&#39;</span> , <span class="stringliteral">&#39;&#39;</span> ) 
<a name="l00387"></a>00387                                     ) , 
<a name="l00388"></a>00388                                     $ProcessingString
<a name="l00389"></a>00389                               );
<a name="l00390"></a>00390                               $Changed = <span class="keyword">true</span>;
<a name="l00391"></a>00391                         }
<a name="l00392"></a>00392                         
<a name="l00393"></a>00393                         <span class="keywordflow">return</span>( array( $ProcessingString , $Changed ) );
<a name="l00394"></a>00394                   }
<a name="l00395"></a>00395                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00396"></a>00396                   {
<a name="l00397"></a>00397                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00398"></a>00398                   }
<a name="l00399"></a>00399             }
<a name="l00400"></a>00400             
<a name="l00427"></a><a class="code" href="classsettings__view__1__0__0.html#a3504399a75314d50d64259dd2a02ef0c">00427</a>             function                <a class="code" href="classsettings__view__1__0__0.html#a3504399a75314d50d64259dd2a02ef0c">process_db_settings</a>( $ProcessingString , $Changed )
<a name="l00428"></a>00428             {
<a name="l00429"></a>00429                   <span class="keywordflow">try</span>
<a name="l00430"></a>00430                   {
<a name="l00431"></a>00431                         $BlockParameters = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00432"></a>00432                         <span class="keywordflow">for</span>( ; $BlockParameters = $this-&gt;String-&gt;get_macro_parameters( $ProcessingString , <span class="stringliteral">&#39;db_settings&#39;</span> ) ; )
<a name="l00433"></a>00433                         {
<a name="l00434"></a>00434                               $this-&gt;BlockSettings-&gt;load_settings( $BlockParameters );
<a name="l00435"></a>00435                               
<a name="l00436"></a>00436                               $SettingName = $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;name&#39;</span> );
<a name="l00437"></a>00437                               $DefaultValue = $this-&gt;BlockSettings-&gt;get_setting( <span class="stringliteral">&#39;default&#39;</span> , <span class="stringliteral">&#39;&#39;</span> );
<a name="l00438"></a>00438                               
<a name="l00439"></a>00439                               $Value = $this-&gt;DBSettings-&gt;get_setting( $SettingName , $DefaultValue );
<a name="l00440"></a>00440                               
<a name="l00441"></a>00441                               $ProcessingString = str_replace( <span class="stringliteral">&quot;{db_settings:$BlockParameters}&quot;</span> , $Value , $ProcessingString );
<a name="l00442"></a>00442                               
<a name="l00443"></a>00443                               $Changed = <span class="keyword">true</span>;
<a name="l00444"></a>00444                         }
<a name="l00445"></a>00445                         
<a name="l00446"></a>00446                         <span class="keywordflow">return</span>( array( $ProcessingString , $Changed ) );
<a name="l00447"></a>00447                   }
<a name="l00448"></a>00448                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00449"></a>00449                   {
<a name="l00450"></a>00450                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00451"></a>00451                   }
<a name="l00452"></a>00452             }
<a name="l00453"></a>00453             
<a name="l00484"></a><a class="code" href="classsettings__view__1__0__0.html#ad8bcfb9f89cf1229657f0aa70f9f6107">00484</a>             function                <a class="code" href="classsettings__view__1__0__0.html#ad8bcfb9f89cf1229657f0aa70f9f6107">process_string</a>( $Options , $ProcessingString , &amp;$Changed )
<a name="l00485"></a>00485             {
<a name="l00486"></a>00486                   <span class="keywordflow">try</span>
<a name="l00487"></a>00487                   {
<a name="l00488"></a>00488                         list( $ProcessingString , $Changed ) = $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#a5937a3e93daa966291bc27f16f665bbf">process_settings</a>( $ProcessingString , $Changed );
<a name="l00489"></a>00489                         
<a name="l00490"></a>00490                         list( $ProcessingString , $Changed ) = $this-&gt;<a class="code" href="classsettings__view__1__0__0.html#a3504399a75314d50d64259dd2a02ef0c">process_db_settings</a>( $ProcessingString , $Changed );
<a name="l00491"></a>00491                         
<a name="l00492"></a>00492                         <span class="keywordflow">return</span>( $ProcessingString );
<a name="l00493"></a>00493                   }
<a name="l00494"></a>00494                   <span class="keywordflow">catch</span>( Exception $e )
<a name="l00495"></a>00495                   {
<a name="l00496"></a>00496                         $a = func_get_args();<a class="code" href="core_8php.html#abfba210aa5ad8e9a273b3342263c2961">_throw_exception_object</a>( __METHOD__ , $a , $e );
<a name="l00497"></a>00497                   }
<a name="l00498"></a>00498             }
<a name="l00499"></a>00499       }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 ?&gt;
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Jun 10 2011 16:20:27 for ultimix by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
